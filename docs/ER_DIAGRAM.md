# ðŸ“Š Diagrama Visual do Banco de Dados (ASCII)

## Relacionamentos Completos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SISTEMA DE GESTÃƒO - ER DIAGRAM                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 USERS                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id (UUID)                                                                â”‚
â”‚ email (VARCHAR, UNIQUE)                                                      â”‚
â”‚ password_hash (VARCHAR)                                                      â”‚
â”‚ first_name, last_name (VARCHAR)                                              â”‚
â”‚ role (ENUM: ADMIN, MANAGER, LEAD, DEVELOPER, CLIENT)                        â”‚
â”‚ status (ENUM: ACTIVE, INACTIVE, SUSPENDED)                                  â”‚
â”‚ created_at, updated_at (TIMESTAMP)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                â”‚              â”‚             â”‚             â”‚
      â”‚ (owner_id)     â”‚              â”‚             â”‚             â”‚
      â”‚ (created_by)   â”‚              â”‚             â”‚             â”‚
      â”‚                â”‚              â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 PROJECTS                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id (UUID)                                                                   â”‚
â”‚ name (VARCHAR)                                                                 â”‚
â”‚ description (TEXT)                                                             â”‚
â”‚ status (PLANNING, ACTIVE, ON_HOLD, COMPLETED, ARCHIVED)                       â”‚
â”‚ priority (LOW, MEDIUM, HIGH, CRITICAL)                                        â”‚
â”‚ start_date, end_date (DATE)                                                    â”‚
â”‚ budget (DECIMAL)                                                               â”‚
â”‚ FK: owner_id â†’ USERS.id                                                        â”‚
â”‚ FK: created_by â†’ USERS.id                                                      â”‚
â”‚ created_at, updated_at (TIMESTAMP)                                            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                                            â”‚
      â”‚ (1:N - Um projeto tem muitas tarefas)                     â”‚
      â”‚                                                            â”‚
      â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
      â”‚                        â”‚                             â”‚    â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROJECT_MEMBERS       â”‚    â”‚                    â”‚      TASKS                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id (UUID)          â”‚    â”‚                    â”‚ PK: id (UUID)                  â”‚
â”‚ FK: project_id         â”‚â—„â”€â”€â”€â”˜                    â”‚ FK: project_id â†’ PROJECTS.id   â”‚
â”‚ FK: user_id â†’ USERS    â”‚                         â”‚ title (VARCHAR)                â”‚
â”‚ role (MEMBER, LEAD)    â”‚                         â”‚ description (TEXT)             â”‚
â”‚ hours_allocated (INT)  â”‚                         â”‚ status (PENDING, IN_PROGRESS,  â”‚
â”‚ joined_at (TIMESTAMP)  â”‚                         â”‚         IN_REVIEW, COMPLETED,  â”‚
â”‚                        â”‚                         â”‚         BLOCKED, CANCELLED)    â”‚
â”‚ UNIQUE(project_id,     â”‚                         â”‚ priority (LOW, MEDIUM, HIGH)   â”‚
â”‚        user_id)        â”‚                         â”‚ start_date, end_date (DATE)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ estimated_hours (DECIMAL)     â”‚
                                                   â”‚ actual_hours (DECIMAL)        â”‚
                                                   â”‚ FK: assigned_to â†’ USERS.id    â”‚
                                                   â”‚ FK: created_by â†’ USERS.id     â”‚
                                                   â”‚ blocked_reason (VARCHAR)      â”‚
                                                   â”‚ created_at, updated_at        â”‚
                                                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                    â”‚                     â”‚
                    â”‚                                    â”‚                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   TASK_ASSIGNEES           â”‚   â”‚   TASK_COMMENTS            â”‚   â”‚ TASK_HISTORY   â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ PK: id (UUID)              â”‚   â”‚ PK: id (UUID)              â”‚   â”‚ PK: id (UUID)  â”‚
        â”‚ FK: task_id â†’ TASKS.id     â”‚   â”‚ FK: task_id â†’ TASKS.id     â”‚   â”‚ FK: task_id    â”‚
        â”‚ FK: user_id â†’ USERS.id     â”‚   â”‚ FK: user_id â†’ USERS.id     â”‚   â”‚ FK: user_id    â”‚
        â”‚ allocated_hours (DECIMAL)  â”‚   â”‚ comment (TEXT)             â”‚   â”‚ field_changed  â”‚
        â”‚ assigned_at (TIMESTAMP)    â”‚   â”‚ is_internal (BOOLEAN)      â”‚   â”‚ old_value      â”‚
        â”‚                            â”‚   â”‚ created_at, updated_at     â”‚   â”‚ new_value      â”‚
        â”‚ UNIQUE(task_id, user_id)   â”‚   â”‚                            â”‚   â”‚ changed_at     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  TASK_ATTACHMENTS            â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ PK: id (UUID)                â”‚
        â”‚ FK: task_id â†’ TASKS.id       â”‚
        â”‚ file_url (VARCHAR)           â”‚
        â”‚ file_name (VARCHAR)          â”‚
        â”‚ file_size (INT)              â”‚
        â”‚ file_type (VARCHAR)          â”‚
        â”‚ FK: uploaded_by â†’ USERS.id   â”‚
        â”‚ created_at (TIMESTAMP)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SERVICES                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id (UUID)                                                                      â”‚
â”‚ FK: project_id â†’ PROJECTS.id                                                       â”‚
â”‚ name (VARCHAR)                                                                     â”‚
â”‚ description (TEXT)                                                                 â”‚
â”‚ type (DEVELOPMENT, DESIGN, TESTING, DEPLOYMENT, SUPPORT, CONSULTATION)            â”‚
â”‚ status (PENDING, IN_PROGRESS, COMPLETED, CANCELLED)                               â”‚
â”‚ start_date, end_date (DATE)                                                        â”‚
â”‚ cost (DECIMAL)                                                                     â”‚
â”‚ FK: assigned_to â†’ USERS.id                                                         â”‚
â”‚ FK: created_by â†’ USERS.id                                                          â”‚
â”‚ created_at, updated_at (TIMESTAMP)                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           NOTIFICATIONS                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id (UUID)                                                                      â”‚
â”‚ FK: user_id â†’ USERS.id                                                             â”‚
â”‚ type (TASK_ASSIGNED, TASK_COMPLETED, COMMENT_ADDED, PROJECT_STARTED, etc)        â”‚
â”‚ message (TEXT)                                                                     â”‚
â”‚ related_entity_type, related_entity_id                                             â”‚
â”‚ is_read (BOOLEAN)                                                                  â”‚
â”‚ read_at (TIMESTAMP)                                                                â”‚
â”‚ created_at (TIMESTAMP)                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            AUDIT_LOGS                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id (UUID)                                                                      â”‚
â”‚ FK: user_id â†’ USERS.id                                                             â”‚
â”‚ action (CREATE, UPDATE, DELETE, LOGIN, EXPORT)                                    â”‚
â”‚ entity_type (project, task, user)                                                 â”‚
â”‚ entity_id (UUID)                                                                   â”‚
â”‚ old_values, new_values (JSONB)                                                     â”‚
â”‚ ip_address, user_agent                                                             â”‚
â”‚ status (SUCCESS, FAILED)                                                           â”‚
â”‚ created_at (TIMESTAMP)                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           INTEGRATIONS                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK: id (UUID)                                                                      â”‚
â”‚ FK: user_id â†’ USERS.id                                                             â”‚
â”‚ type (GOOGLE_CALENDAR, OUTLOOK, SLACK, GITHUB, JIRA)                             â”‚
â”‚ token_encrypted, refresh_token_encrypted (VARCHAR)                                â”‚
â”‚ connected (BOOLEAN)                                                                â”‚
â”‚ last_sync (TIMESTAMP)                                                              â”‚
â”‚ created_at, updated_at (TIMESTAMP)                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Fluxo de Dados - Exemplo: Criar Projeto

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario â”‚                                                            â”‚ Database â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                                                       â”‚
     â”‚ 1. POST /api/projects                                               â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚    {name, description, start_date, end_date, budget}              â”‚
     â”‚                                                                     â”‚
     â”‚ 2. Frontend valida dados                                           â”‚
     â”‚                                                                     â”‚
     â”‚ 3. Envia com Authorization Bearer Token                            â”‚
     â”‚                                                                     â”‚
     â”‚ 4. Backend recebe requisiÃ§Ã£o                                       â”‚
     â”‚    - Valida JWT token                                             â”‚
     â”‚    - Valida permissÃµes (MANAGER, ADMIN)                          â”‚
     â”‚    - Valida dados de entrada (Joi schema)                        â”‚
     â”‚                                                                     â”‚
     â”‚ 5. ProjectController.create()                                      â”‚
     â”‚    - Sanitiza inputs                                              â”‚
     â”‚    - Chama ProjectService.createProject()                         â”‚
     â”‚                                                                     â”‚
     â”‚ 6. ProjectService executa regras de negÃ³cio                        â”‚
     â”‚    - Valida datas (end_date >= start_date)                       â”‚
     â”‚    - Valida budget (>= 0)                                         â”‚
     â”‚    - Busca owner (existe?)                                        â”‚
     â”‚                                                                     â”‚
     â”‚ 7. ProjectRepository.create()                                      â”‚
     â”‚    - Executa INSERT na tabela projects              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚    - Retorna projeto criado com ID                               â”‚
     â”‚<â”€â”€â”€ Projeto com ID gerado â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                                                                    â”‚
     â”‚ 8. Registrar no audit_logs                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚    INSERT audit record                                            â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                                                                    â”‚
     â”‚ 9. Dispara evento ProjectCreated                                 â”‚
     â”‚    - Enfilera: send notification emails                          â”‚
     â”‚    - Enfilera: update dashboard metrics                          â”‚
     â”‚                                                                    â”‚
     â”‚ 10. Retorna 201 Created ao Frontend                              â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚    {id, name, status, created_at, ...}                           â”‚
     â”‚                                                                    â”‚
     â”‚ 11. Frontend atualiza state                                       â”‚
     â”‚    - Adiciona novo projeto Ã  lista                               â”‚
     â”‚    - Mostra sucesso com toast                                    â”‚
     â”‚    - Navega para detalhe do projeto                              â”‚
     â”‚
```

## Ãndices e Performance

```sql
-- Ãndices de busca rÃ¡pida
CREATE INDEX idx_tasks_project_status ON tasks(project_id, status);
CREATE INDEX idx_tasks_assignee_status ON tasks(assigned_to, status);

-- Ãndices para relatÃ³rios
CREATE INDEX idx_tasks_completed ON tasks(project_id, status, updated_at) 
WHERE status = 'COMPLETED';

CREATE INDEX idx_tasks_timeline ON tasks(project_id, end_date, start_date);

-- Ãndices para notificaÃ§Ãµes
CREATE INDEX idx_notifications_unread ON notifications(user_id, is_read, created_at);

-- Ãndices para auditoria
CREATE INDEX idx_audit_entity ON audit_logs(entity_type, entity_id, created_at);
```

## Cardinalidade dos Relacionamentos

```
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) Projects (como owner/creator)
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) ProjectMembers
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) Tasks (como assigned_to)
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) TaskAssignees
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) Comments
Users (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) AuditLogs

Projects (1) â”€â”€â”€â”€ (N) Tasks
Projects (1) â”€â”€â”€â”€ (N) Services
Projects (1) â”€â”€â”€â”€ (N) ProjectMembers

Tasks (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) TaskAssignees
Tasks (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) Comments
Tasks (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) Attachments
Tasks (1) â”€â”€â”€â”€â”€â”€â”€â”€ (N) History
```

## Constraints de Integridade

```sql
-- Chaves estrangeiras
ALTER TABLE projects
  ADD FOREIGN KEY (owner_id) REFERENCES users(id);
  
ALTER TABLE project_members
  ADD FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE;

-- Checks
ALTER TABLE projects
  ADD CHECK (end_date >= start_date);
  
ALTER TABLE tasks
  ADD CHECK (estimated_hours > 0);
```

## Particionamento (Para Grande Escala)

```sql
-- Particionar tasks por ano de criaÃ§Ã£o
CREATE TABLE tasks_2024 PARTITION OF tasks
  FOR VALUES FROM (YEAR '2024-01-01') TO (YEAR '2025-01-01');

CREATE TABLE tasks_2025 PARTITION OF tasks
  FOR VALUES FROM (YEAR '2025-01-01') TO (YEAR '2026-01-01');

-- Particionar audit_logs por mÃªs
CREATE TABLE audit_logs_2026_01 PARTITION OF audit_logs
  FOR VALUES FROM (YEAR '2026-01-01') TO (YEAR '2026-02-01');
```
